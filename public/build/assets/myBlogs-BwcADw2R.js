import{$ as o}from"./jquery-Da9eaIsk.js";import{f as b}from"./helper-CmIqiOp8.js";import{a as l,A as f,s as c}from"./api-ByUICYev.js";import"./_commonjsHelpers-CqkleIqs.js";import"./toastify-bLbphjvx.js";o(document).ready(function(){const i=o("#blog-list"),r=o("#pagination"),g=o("#my-blog-template");let d=1;const u=5;function s(e=1){i.html("<p class='text-gray-500'>Loading ...</p>"),l({url:`${f}/my-blogs?page=${e}&per_page=${u}`,success:function(n){const t=n.data.data,a=n.data.current_page,h=n.data.last_page;p(t),m(a,h)},error:function(){i.html("<p class='text-red-500'>Lỗi khi tải dữ liệu blog.</p>"),c("Lỗi khi load danh sách","error")}})}function p(e){i.empty(),Array.isArray(e)&&e.length>0?e.forEach(function(n){const t=o(g.html());t.find(".blog-time").text(b(n.created_at)),t.find(".blog-title").text(n.title),t.find(".blog-content").text(n.description),t.attr("data-id",n.id),t.find(".blog-title").on("click",function(){window.location.href=`blogs/${n.id}`}),t.find(".btn-update").attr("data-id",n.id).on("click",function(){const a=o(this).data("id");window.location.href=`/update-blog?id=${a}`}),t.find(".btn-delete").attr("data-id",n.id),i.append(t)}):i.html("<p>No blogs found.</p>")}function m(e,n){r.empty();for(let t=1;t<=n;t++){const a=o("<button>").text(t).addClass("px-4 py-2 rounded").addClass(t===e?"bg-blue-600 text-white":"bg-gray-200 hover:bg-blue-200").on("click",function(){d=t,s(t)});r.append(a)}}s(d),o(document).on("click",".btn-delete",function(){const e=o(this).data("id");confirm("Bạn có chắc chắn muốn xóa blog này không?")&&l({url:`${f}/blogs/${e}`,method:"DELETE",success:function(t){t.success?(c("Xóa blog thành công!","success"),o(`.blog-item[data-id="${e}"]`).remove()):c(t.message||"Xóa blog thất bại!","error")},error:function(){c("Lỗi máy chủ khi xóa!","error")}})})});
