import{$ as e}from"./jquery-Da9eaIsk.js";import{a as i,A as c,s as t}from"./api-ByUICYev.js";import"./_commonjsHelpers-CqkleIqs.js";import"./toastify-bLbphjvx.js";e(document).ready(function(){e("#registerForm").on("submit",function(s){s.preventDefault();const n={name:e("#name").val(),email:e("#email").val(),password:e("#password").val(),password_confirmation:e("#password_confirmation").val()};i({url:`${c}/register`,method:"POST",data:n,success:function(o){if(o.success)window.location.href="/auth/login";else{const r=o.errors||o.message||"Đăng ký thất bại!";t(r,"error")}},error:function(o){a(o,"Đăng ký thất bại!")}})}),e("#loginForm").on("submit",function(s){s.preventDefault();const n={email:e("#email").val(),password:e("#password").val()};i({url:`${c}/login`,method:"POST",data:n,success:function(o){if(o.success)localStorage.setItem("token",o.data.token),window.location.href="/home";else{const r=o.errors||o.message||"Đăng nhập thất bại!";t(r,"error")}},error:function(o){a(o,"Đăng nhập thất bại!")}})}),e("#link-log-out a").on("click",function(s){s.preventDefault(),localStorage.removeItem("token"),window.location.href="/auth/login"});function a(s,n){let o=n;try{const r=JSON.parse(s.responseText);o=r.errors||r.message||n}catch(r){console.error("Lỗi parse JSON:",r)}t(o,"error")}});
