import{$ as e}from"./jquery-Da9eaIsk.js";import{a as i,s as n}from"./api-CLbSGjtn.js";import"./_commonjsHelpers-CqkleIqs.js";import"./toastify-bLbphjvx.js";e(document).ready(function(){e("#registerForm").on("submit",function(t){t.preventDefault();const s={name:e("#name").val(),email:e("#email").val(),password:e("#password").val(),password_confirmation:e("#password_confirmation").val()};i({url:"http://localhost:8000/api/register",method:"POST",data:s,success:function(o){if(o.success)window.location.href="/auth/login";else{const r=o.errors||o.message||"Đăng ký thất bại!";n(r,"error")}},error:function(o){a(o,"Đăng ký thất bại!")}})}),e("#loginForm").on("submit",function(t){t.preventDefault();const s={email:e("#email").val(),password:e("#password").val()};i({url:"http://localhost:8000/api/login",method:"POST",data:s,success:function(o){if(o.success)localStorage.setItem("token",o.data.token),window.location.href="/home";else{const r=o.errors||o.message||"Đăng nhập thất bại!";n(r,"error")}},error:function(o){a(o,"Đăng nhập thất bại!")}})}),e("#link-log-out a").on("click",function(t){t.preventDefault(),localStorage.removeItem("token"),window.location.href="/auth/login"});function a(t,s){let o=s;try{const r=JSON.parse(t.responseText);o=r.errors||r.message||s}catch(r){console.error("Lỗi parse JSON:",r)}n(o,"error")}});
