import{$ as e}from"./jquery-Da9eaIsk.js";import{f as h}from"./helper-CmIqiOp8.js";import{a as s,s as c}from"./api-CLbSGjtn.js";import"./_commonjsHelpers-CqkleIqs.js";import"./toastify-bLbphjvx.js";e(document).ready(function(){const i=e("#blog-list"),r=e("#pagination"),p=e("#my-blog-template");let d=1;const f=5;function l(o=1){i.html("<p class='text-gray-500'>Loading ...</p>"),s({url:`http://localhost:8000/api/my-blogs?page=${o}&per_page=${f}`,success:function(n){const t=n.data.data,a=n.data.current_page,m=n.data.last_page;g(t),u(a,m)},error:function(){i.html("<p class='text-red-500'>Lỗi khi tải dữ liệu blog.</p>"),c("Lỗi khi load danh sách","error")}})}function g(o){i.empty(),Array.isArray(o)&&o.length>0?o.forEach(function(n){const t=e(p.html());t.find(".blog-time").text(h(n.created_at)),t.find(".blog-title").text(n.title),t.find(".blog-content").text(n.description),t.attr("data-id",n.id),t.find(".blog-title").on("click",function(){window.location.href=`blogs/${n.id}`}),t.find(".btn-update").attr("data-id",n.id).on("click",function(){const a=e(this).data("id");window.location.href=`/update-blog?id=${a}`}),t.find(".btn-delete").attr("data-id",n.id),i.append(t)}):i.html("<p>No blogs found.</p>")}function u(o,n){r.empty();for(let t=1;t<=n;t++){const a=e("<button>").text(t).addClass("px-4 py-2 rounded").addClass(t===o?"bg-blue-600 text-white":"bg-gray-200 hover:bg-blue-200").on("click",function(){d=t,l(t)});r.append(a)}}l(d),e(document).on("click",".btn-delete",function(){const o=e(this).data("id");confirm("Bạn có chắc chắn muốn xóa blog này không?")&&s({url:`http://localhost:8000/api/blogs/${o}`,method:"DELETE",success:function(t){t.success?(c("Xóa blog thành công!","success"),e(`.blog-item[data-id="${o}"]`).remove()):c(t.message||"Xóa blog thất bại!","error")},error:function(){c("Lỗi máy chủ khi xóa!","error")}})})});
