import{$ as n}from"./jquery-Da9eaIsk.js";import{f as g}from"./helper-CmIqiOp8.js";import{a as m,s as h}from"./api-CLbSGjtn.js";import"./_commonjsHelpers-CqkleIqs.js";import"./toastify-bLbphjvx.js";n(document).ready(function(){const o=n("#blog-list"),r=n("#pagination"),s=n("#blog-template");let c=1;const d=5;function l(a=1){o.html("<p class='text-gray-500'>Đang tải dữ liệu...</p>"),m({url:`http://localhost:8000/api/blogs?page=${a}&per_page=${d}`,method:"GET",success:function(e){const t=e.data.data,i=e.data.current_page,f=e.data.last_page;p(t),u(i,f)},error:function(e){console.error("Lỗi API:",e),o.html("<p class='text-red-500'>Lỗi khi tải dữ liệu blog.</p>"),h("Lỗi khi load danh sách","error")}})}function p(a){o.empty(),Array.isArray(a)&&a.length>0?a.forEach(function(e){const t=n(s.html());t.find(".author-name").text(e.user.name),t.find(".author-email").text(e.user.email),t.find(".blog-time").text(g(e.created_at)),t.find(".blog-title").text(e.title),t.find(".blog-content").text(e.description),t.attr("data-id",e.id),t.find(".blog-title").on("click",function(){window.location.href=`blogs/${e.id}`}),o.append(t)}):o.html("<p>Không có blog nào.</p>")}function u(a,e){r.empty();for(let t=1;t<=e;t++){const i=n("<button>").text(t).addClass("px-4 py-2 rounded").addClass(t===a?"bg-blue-600 text-white":"bg-gray-200 hover:bg-blue-200").on("click",function(){c=t,l(t)});r.append(i)}}l(c)});
